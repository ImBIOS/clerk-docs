---
title: Ruby on Rails integration
description: The Clerk Ruby SDK provides a Rack middleware and a gem to integrate Clerk into your Rails app.
---

{/* TODO: What does gem mean? The `clerk-sdk-ruby` gem? */}

The Clerk Ruby SDK provides a Rack middleware to integrate Clerk into your Rack-based application. If you add the gem in a Rails app, the Rack middleware will be included automatically in the middleware stack. To access Clerk's authentication functionality in your controllers, include the `Clerk::Authenticatable` concern. This gives your controller and views access to the `clerk` method.

{/* TODO: What is this code doing? */}

The following example demonstrates how to protect a controller and its actions using the `require_clerk_session!` method, which checks for an authenticated Clerk session.

```ruby {{ filename: 'app/controllers/application_controller.rb' }}
class ApplicationController < ActionController::Base
  include Clerk::Authenticatable

  private

  # If the user is not authenticated, redirect to the sign-in page
  def require_clerk_session!
    # The `CLERK_SIGN_IN_URL` env var must be set or the `sign_in_url` method will fail
    redirect_to clerk.sign_in_url unless clerk.session
  end
end
```

## Protected & Reverification actions

To protect specific controllers or actions, you can add a `before_action` callback that uses the `require_clerk_session!` method to check for an authenticated Clerk session. This is particularly useful for securing admin sections or sensitive operations.

For actions requiring additional security, Clerk provides a `:require_reverification!` filter that prompts users to re-authenticate. This filter accepts an optional preset parameter to customize the reverification requirements.

{/* TODO: How is the preset used here?
  also note: /docs/references/backend/types/auth-object#reverification-config
*/}

```ruby
class AdminController < ApplicationController
  before_action :require_clerk_session!
  before_action :require_reverification!, only: :destroy #, preset: Clerk::StepUp::Preset::LAX


  def index
    # ...
  end

  def destroy
    # ...
  end
end
```
